// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: customer_card.sql

package generated

import (
	"context"
	"database/sql"
)

const createNewCustomerCard = `-- name: CreateNewCustomerCard :one
INSERT INTO
    customer_card (card_number, customer_surname, customer_name, customer_patronymic, phone_number, city, street, zip_code, customer_percent)
VALUES
    ($1, $2, $3, $4, $5, $6, $7, $8, $9)
    RETURNING
	card_number,
	customer_surname,
	customer_name,
	customer_patronymic,
	phone_number,
	city,
	street,
	zip_code,
	customer_percent
`

type CreateNewCustomerCardParams struct {
	CardNumber         string
	CustomerSurname    string
	CustomerName       string
	CustomerPatronymic sql.NullString
	PhoneNumber        string
	City               sql.NullString
	Street             sql.NullString
	ZipCode            sql.NullString
	CustomerPercent    int32
}

func (q *Queries) CreateNewCustomerCard(ctx context.Context, arg CreateNewCustomerCardParams) (CustomerCard, error) {
	row := q.db.QueryRowContext(ctx, createNewCustomerCard,
		arg.CardNumber,
		arg.CustomerSurname,
		arg.CustomerName,
		arg.CustomerPatronymic,
		arg.PhoneNumber,
		arg.City,
		arg.Street,
		arg.ZipCode,
		arg.CustomerPercent,
	)
	var i CustomerCard
	err := row.Scan(
		&i.CardNumber,
		&i.CustomerSurname,
		&i.CustomerName,
		&i.CustomerPatronymic,
		&i.PhoneNumber,
		&i.City,
		&i.Street,
		&i.ZipCode,
		&i.CustomerPercent,
	)
	return i, err
}

const deleteCustomerCardByID = `-- name: DeleteCustomerCardByID :one
DELETE FROM customer_card
WHERE card_number = $1
RETURNING card_number
`

func (q *Queries) DeleteCustomerCardByID(ctx context.Context, cardNumber string) (string, error) {
	row := q.db.QueryRowContext(ctx, deleteCustomerCardByID, cardNumber)
	var card_number string
	err := row.Scan(&card_number)
	return card_number, err
}

const getAllCustomerCards = `-- name: GetAllCustomerCards :many
SELECT
    card_number,
	customer_surname,
	customer_name,
	customer_patronymic,
	phone_number,
	city,
	street,
	zip_code,
	customer_percent
FROM customer_card
WHERE card_number > $1
ORDER BY card_number
FETCH FIRST $2 ROWS ONLY
`

type GetAllCustomerCardsParams struct {
	CardNumber string
	Limit      int32
}

func (q *Queries) GetAllCustomerCards(ctx context.Context, arg GetAllCustomerCardsParams) ([]CustomerCard, error) {
	rows, err := q.db.QueryContext(ctx, getAllCustomerCards, arg.CardNumber, arg.Limit)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []CustomerCard
	for rows.Next() {
		var i CustomerCard
		if err := rows.Scan(
			&i.CardNumber,
			&i.CustomerSurname,
			&i.CustomerName,
			&i.CustomerPatronymic,
			&i.PhoneNumber,
			&i.City,
			&i.Street,
			&i.ZipCode,
			&i.CustomerPercent,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const getAllCustomerCardsSortedBySurname = `-- name: GetAllCustomerCardsSortedBySurname :many
SELECT
    card_number,
	customer_surname,
	customer_name,
	customer_patronymic,
	phone_number,
	city,
	street,
	zip_code,
	customer_percent
FROM customer_card
WHERE card_number > $1
ORDER BY customer_surname, card_number
FETCH FIRST $2 ROWS ONLY
`

type GetAllCustomerCardsSortedBySurnameParams struct {
	CardNumber string
	Limit      int32
}

func (q *Queries) GetAllCustomerCardsSortedBySurname(ctx context.Context, arg GetAllCustomerCardsSortedBySurnameParams) ([]CustomerCard, error) {
	rows, err := q.db.QueryContext(ctx, getAllCustomerCardsSortedBySurname, arg.CardNumber, arg.Limit)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []CustomerCard
	for rows.Next() {
		var i CustomerCard
		if err := rows.Scan(
			&i.CardNumber,
			&i.CustomerSurname,
			&i.CustomerName,
			&i.CustomerPatronymic,
			&i.PhoneNumber,
			&i.City,
			&i.Street,
			&i.ZipCode,
			&i.CustomerPercent,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const getCustomerCardByID = `-- name: GetCustomerCardByID :one
SELECT
    card_number,
	customer_surname,
	customer_name,
	customer_patronymic,
	phone_number,
	city,
	street,
	zip_code,
	customer_percent
FROM customer_card
WHERE card_number = $1
`

func (q *Queries) GetCustomerCardByID(ctx context.Context, cardNumber string) (CustomerCard, error) {
	row := q.db.QueryRowContext(ctx, getCustomerCardByID, cardNumber)
	var i CustomerCard
	err := row.Scan(
		&i.CardNumber,
		&i.CustomerSurname,
		&i.CustomerName,
		&i.CustomerPatronymic,
		&i.PhoneNumber,
		&i.City,
		&i.Street,
		&i.ZipCode,
		&i.CustomerPercent,
	)
	return i, err
}

const getCustomerCardsByPercentSorted = `-- name: GetCustomerCardsByPercentSorted :many
SELECT
    card_number,
	customer_surname,
	customer_name,
	customer_patronymic,
	phone_number,
	city,
	street,
	zip_code,
	customer_percent
FROM customer_card
WHERE customer_percent = $1 and card_number > $2
ORDER BY card_number
FETCH FIRST $3 ROWS ONLY
`

type GetCustomerCardsByPercentSortedParams struct {
	CustomerPercent int32
	CardNumber      string
	Limit           int32
}

func (q *Queries) GetCustomerCardsByPercentSorted(ctx context.Context, arg GetCustomerCardsByPercentSortedParams) ([]CustomerCard, error) {
	rows, err := q.db.QueryContext(ctx, getCustomerCardsByPercentSorted, arg.CustomerPercent, arg.CardNumber, arg.Limit)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []CustomerCard
	for rows.Next() {
		var i CustomerCard
		if err := rows.Scan(
			&i.CardNumber,
			&i.CustomerSurname,
			&i.CustomerName,
			&i.CustomerPatronymic,
			&i.PhoneNumber,
			&i.City,
			&i.Street,
			&i.ZipCode,
			&i.CustomerPercent,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const searchCustomerCardBySurname = `-- name: SearchCustomerCardBySurname :many
SELECT
    card_number,
	customer_surname,
	customer_name,
	customer_patronymic,
	phone_number,
	city,
	street,
	zip_code,
	customer_percent
FROM customer_card
WHERE card_number > $1 and customer_surname ILIKE $2
ORDER BY card_number
FETCH FIRST $3 ROWS ONLY
`

type SearchCustomerCardBySurnameParams struct {
	CardNumber      string
	CustomerSurname string
	Limit           int32
}

func (q *Queries) SearchCustomerCardBySurname(ctx context.Context, arg SearchCustomerCardBySurnameParams) ([]CustomerCard, error) {
	rows, err := q.db.QueryContext(ctx, searchCustomerCardBySurname, arg.CardNumber, arg.CustomerSurname, arg.Limit)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []CustomerCard
	for rows.Next() {
		var i CustomerCard
		if err := rows.Scan(
			&i.CardNumber,
			&i.CustomerSurname,
			&i.CustomerName,
			&i.CustomerPatronymic,
			&i.PhoneNumber,
			&i.City,
			&i.Street,
			&i.ZipCode,
			&i.CustomerPercent,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const updateCustomerCard = `-- name: UpdateCustomerCard :one
UPDATE customer_card
SET
    customer_surname = $2,
    customer_name = $3,
    customer_patronymic = $4,
    phone_number = $5,
    city = $6,
    street = $7,
    zip_code = $8,
    customer_percent = $9
WHERE card_number = $1
RETURNING
	card_number,
	customer_surname,
	customer_name,
	customer_patronymic,
	phone_number,
	city,
	street,
	zip_code,
	customer_percent
`

type UpdateCustomerCardParams struct {
	CardNumber         string
	CustomerSurname    string
	CustomerName       string
	CustomerPatronymic sql.NullString
	PhoneNumber        string
	City               sql.NullString
	Street             sql.NullString
	ZipCode            sql.NullString
	CustomerPercent    int32
}

func (q *Queries) UpdateCustomerCard(ctx context.Context, arg UpdateCustomerCardParams) (CustomerCard, error) {
	row := q.db.QueryRowContext(ctx, updateCustomerCard,
		arg.CardNumber,
		arg.CustomerSurname,
		arg.CustomerName,
		arg.CustomerPatronymic,
		arg.PhoneNumber,
		arg.City,
		arg.Street,
		arg.ZipCode,
		arg.CustomerPercent,
	)
	var i CustomerCard
	err := row.Scan(
		&i.CardNumber,
		&i.CustomerSurname,
		&i.CustomerName,
		&i.CustomerPatronymic,
		&i.PhoneNumber,
		&i.City,
		&i.Street,
		&i.ZipCode,
		&i.CustomerPercent,
	)
	return i, err
}
